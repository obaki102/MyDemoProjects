@page "/"
@inject IRandomGOTQuotes RandomGOTQuotes;

@if (RandomQuotes == null)
{
    <MudOverlay Visible="@true" DarkBackground="true" ZIndex="9999" AutoClose="true">
        <MudProgressCircular Color="Color.Primary" Indeterminate="true" Size="Size.Large" />
    </MudOverlay>
}
else
{
    <AuthorizeView>
        <Authorized>
            <MudCard Outlined="true">
                <MudCardContent>
                    <MudText>Random GOT Quotes</MudText>
                    <MudText Typo="Typo.body2"> @RandomQuotes.Sentence </MudText>
                </MudCardContent>
                <MudCardActions>
                    <MudChip Color="Color.Dark">@RandomQuotes.Character.Name</MudChip>
                </MudCardActions>
            </MudCard>

        </Authorized>
        <NotAuthorized>
            <MudText Typo="Typo.h3" GutterBottom="true">NOT Authorized!</MudText>
        </NotAuthorized>
    </AuthorizeView>
}


@code {
    private RandomGOTQuotesResponse RandomQuotes = default;

    protected override async Task OnInitializedAsync()
    {
        await RandomGOTQuotes.GetRandomGOTQuotes();
        RandomQuotes = RandomGOTQuotes.GOTQuotes;
    }
}