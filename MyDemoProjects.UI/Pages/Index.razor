@page "/index"
@using System.Security.Claims
@using MyDemoProjects.Application.Shared.Constants
@inject IRetrieveAuthState RetrieveAuthState;
<AuthorizeView>

    <Authorized>
        <MudText Typo="Typo.h3" GutterBottom="true">Authorized!</MudText>
        <MudAvatar Size="Size.Large" Image="@picUrl"></MudAvatar>
        @foreach (var claim in claims)
        {
        <MudText Class="mb-8">@claim.Value</MudText>
        }
       
    </Authorized>
    <NotAuthorized>
        <MudText Typo="Typo.h3" GutterBottom="true">NOT Authorized!</MudText>
    </NotAuthorized>


</AuthorizeView>

@code{
    private Dictionary<string, string> claims = new Dictionary<string, string>();
    private string picUrl = string.Empty;
    protected override async Task OnInitializedAsync()
    {

        claims = await RetrieveAuthState.GetClaimValues();
        picUrl = claims[ApplicationClaimTypes.ProfilePictureDataUrl];
    }
}